<%- include('../partials/header') %>

<main class="container">

  <!-- CATEGORY CONTEXT -->
  <section class="info-box">
    <h2>Category</h2>

    <% if (category) { %>
      <ul class="info-list">
        <li>
          üìÇ Category:
          <strong style="color:#fff;"><%= category %></strong>
        </li>
        <li>
          üìÑ Results on this page:
          <strong style="color:#fff;"><%= links.length %></strong>
        </li>
      </ul>
    <% } %>
  </section>

  <!-- RESULTS -->
  <% if (links && links.length > 0) { %>

    <section class="category-section">

      <div class="links-wrapper">

        <% links.forEach(link => { %>
          <article class="link-card">

            <div class="link-left">
              <h3><%= link.title %></h3>

              <div class="link-meta">

                <span class="meta-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                  <%= new Date(link.createdAt).toLocaleDateString('en-GB') %>
                </span>

                <span class="meta-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  <%= new Date(link.createdAt).toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                  }) %>
                </span>

                <span class="meta-item">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
    <line x1="7" y1="7" x2="7.01" y2="7"></line>
  </svg>
  <%= link.category %>
</span>

              </div>
            </div>

            <a class="visit-btn mega-style"
               href="<%= link.url %>"
               target="_blank"
               rel="noopener">

              <svg class="mega-logo" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0z"></path>
              </svg>

              <span>Visit Mega Link</span>

              <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M14 5l7 7m0 0l-7 7m7-7H3">
                </path>
              </svg>

            </a>

          </article>
        <% }) %>

      </div>
    </section>

    <!-- PAGINATION -->
    <% if (totalPages && totalPages > 1) { %>
      <nav class="pagination-container" aria-label="Page navigation">
        <div class="pagination-wrapper">

          <% if (page > 1) { %>
            <a href="?page=<%= page - 1 %>" class="pag-btn prev-next">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M15 19l-7-7 7-7"></path>
              </svg>
              <span>Prev</span>
            </a>
          <% } else { %>
            <span class="pag-btn prev-next disabled">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M15 19l-7-7 7-7"></path>
              </svg>
              <span>Prev</span>
            </span>
          <% } %>

          <div class="page-counter">
            <span class="current-page"><%= page %></span>
            <span class="sep">/</span>
            <span class="total-pages"><%= totalPages %></span>
          </div>

          <% if (page < totalPages) { %>
            <a href="?page=<%= page + 1 %>" class="pag-btn prev-next">
              <span>Next</span>
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          <% } else { %>
            <span class="pag-btn prev-next disabled">
              <span>Next</span>
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M9 5l7 7-7 7"></path>
              </svg>
            </span>
          <% } %>

        </div>
      </nav>
    <% } %>

  <% } else { %>

    <!-- NO RESULTS -->
    <section class="info-box">
      <ul class="info-list">
        <li>‚ùå No results found</li>
        <li>üí° Try another category</li>
      </ul>
    </section>

  <% } %>

</main>

<%- include('../partials/footer') %>
